<!DOCTYPE html>
<html lang="en"><head>
<script src="slides_files/libs/clipboard/clipboard.min.js"></script>
<script src="slides_files/libs/quarto-html/tabby.min.js"></script>
<script src="slides_files/libs/quarto-html/popper.min.js"></script>
<script src="slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Charles C. Lanfear">
  <title>Did closing the gun show loophole actually work?</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/theme/quarto-15aebbe76258ed31515d9794870c2233.css">
  <link href="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/paisley.png" data-background-position="bottom" data-background-size="contain" class="quarto-title-block center">
  <h1 class="title">Did closing the gun show loophole actually work?</h1>
  <p class="subtitle">TL;DR: no</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Charles C. Lanfear 
</div>
        <p class="quarto-title-affiliation">
            University of Cambridge
          </p>
    </div>
</div>

</section>
<section>
<section id="background" class="title-slide slide level1 inv-title center" data-background-color="#b0514a">
<h1>Background</h1>

</section>
<section id="private-party-gun-sales" class="slide level2">
<h2>Private party gun sales</h2>
<p>85% of the guns used in a crime that are recovered by the police were sold at least once through a private party transaction (Wintemute, Braga, and Kennedy 2010).</p>
<p>&nbsp;</p>
<blockquote>
<p>There is a large and growing black market of guns that are being sold by people who are in the business of dealing and are doing it without a license; and therefore, they are not running background checks the way the law requires. And it is fueling violence.</p>
</blockquote>
<p>Steven Dettelbach, ATF Director, 10 Apr 2024</p>
</section>
<section id="section" class="slide level2 dark-slide">
<h2></h2>

<img data-src="img/nyt_gun-show-loophole.jpg" class="r-stretch"></section>
<section id="section-1" class="slide level2">
<h2></h2>
<blockquote>
<p>I’ve spent hours with families who’ve lost loved ones to gun violence. They all have the same message: ‘Do something.’ Today, my Administration is taking action to make sure fewer guns are sold without background checks.</p>
</blockquote>
<p>President Biden, 10 Apr 2024</p>
<blockquote>
<p>Every year, thousands of unlicensed gun dealers sell tens of thousands of guns without a background check, including to buyers who would have failed one – domestic abusers, violent felons, and even children. This single gap in our federal background check system has caused unimaginable pain and suffering. Today, as the head of the White House Office of Gun Violence Prevention, I am proud to say that all gun dealers must conduct background checks no matter where or how they sell.</p>
</blockquote>
<p>Vice President Harris, 10 Apr 2024</p>
</section>
<section id="not-just-gun-shows" class="slide level2">
<h2>Not just gun shows</h2>
<div class="columns">
<div class="column" style="width:47%;">
<p><strong>Commercial Dealers</strong></p>
<ul>
<li>Anyone “engaged in the business” of selling firearms</li>
<li>Federal Firearms License (FFL)</li>
<li>Background checks required
<ul>
<li>National Instant Criminal Background Check System (NICS)</li>
</ul></li>
</ul>
</div><div class="column" style="width:6%;">
<p>‍</p>
</div><div class="column" style="width:47%;">
<p><strong>Private Sellers</strong></p>
<ul>
<li>No licenses</li>
<li>Checks required in 21 states and DC</li>
<li>Not required in 29 states</li>
</ul>
</div></div>
<div class="center">
<p><em>13% of recent firearm purchases in the US occurred without a background check, including 50% of private purchases made… outside of stores</em></p>
</div>
</section>
<section id="policy-landscape-before-may-20" class="slide level2">
<h2>Policy landscape before May 20</h2>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-1-1.png" width="960" class="r-stretch"></section>
<section id="the-policy-redefinition-of-dealers" class="slide level2">
<h2>The policy: Redefinition of dealers</h2>
<p>Policy announced April 10, took effect May 20</p>
<p>&nbsp;</p>
<blockquote>
<p>You will need a license if you are devoting time, attention, and labor to dealing in firearms as a regular course of trade or business to <strong>predominantly earn a profit</strong> through the repetitive purchase and resale of firearms… By contrast, if you make only occasional resales of firearms to enhance your personal collection or if you liquidate your personal collection (without restocking), you do not need to be licensed” (ATF 2024, p.&nbsp;i)</p>
</blockquote>
<div class="center">
<p><em>Private sellers doing so to earn profit now required to obtain FFLs and conduct background checks</em></p>
</div>
</section>
<section id="the-injunction" class="slide level2">
<h2>The injunction</h2>
<p>&nbsp;</p>
<div class="center">
<p><em>A federal lawsuit in Northern District of Texas provided injunctive relief for Texas, Lousiana, Mississippi and Utah</em></p>
<p>&nbsp;</p>
<p><em>Private sellers in these states would not be required to obtain FFLs or conduct background checks</em></p>
</div>
</section>
<section id="policy-landscape-after-may-20" class="slide level2">
<h2>Policy landscape after May 20</h2>

<img data-src="slides_files/figure-revealjs/unnamed-chunk-2-1.png" width="960" class="r-stretch"></section>
<section id="the-gun-market" class="slide level2">
<h2>The gun market</h2>
<p>&nbsp;</p>
<p>If private individuals are “engaged in the business” of selling, they can…</p>
<ol type="1">
<li>Ignore change and continue selling firearms without a license</li>
<li>Stop selling firearms</li>
<li>Obtain FFL to continue selling<sup>1</sup></li>
</ol>
<p>&nbsp;</p>
<div class="center">
<p><em>A decline in private dealers should increase background checks as buyers turn to FFLs.</em></p>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>An FFL takes a minimum of two months to obtain</p></li></ol></aside></section>
<section id="our-focus" class="slide level2">
<h2>Our focus</h2>
<p>&nbsp;</p>
<div class="center">
<p><em>Fewer firearms sold without background checks may reduce less gun violence</em></p>
<div class="fragment">
<p>&nbsp;</p>
<p><em>But any effect on violence will only occur through changes in legal gun markets</em></p>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p><em>So we’re focusing on the proximal mediator: <strong>legal gun markets</strong></em></p>
</div>
</div>
</section>
<section id="research-questions" class="slide level2 dark-slide">
<h2>Research Questions</h2>
<p>&nbsp;</p>
<p>As a result of the rule change…</p>
<ol type="1">
<li class="fragment">Did FFLs increase?</li>
<li class="fragment">Did background checks increase?</li>
<li class="fragment">Did the volume of gun sales change?
<ul>
<li class="fragment">Did private listings decline?</li>
<li class="fragment">Did commercial listings increase?</li>
</ul></li>
</ol>
</section></section>
<section>
<section id="research-design" class="title-slide slide level1 inv-title center" data-background-color="#b0514a">
<h1>Research design</h1>

</section>
<section id="data" class="slide level2">
<h2>Data</h2>
<ul>
<li>FFL lists from ATF
<ul>
<li>Number of new licenses</li>
</ul></li>
<li>NICS background checks from FBI
<ul>
<li>Number of background checks for firearm purchases</li>
</ul></li>
<li>Firearm sale listings from Armslist.com
<ul>
<li>Number of new private listings</li>
<li>Number of new dealer listings</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="arsmlist" class="title-slide slide level1 inv-title center" data-background-color="#b0514a">
<h1>Arsmlist</h1>

</section>
<section id="craigslist-for-guns" class="slide level2">
<h2>Craigslist for guns</h2>

<img data-src="img/armslist-main.png" class="r-stretch"></section>
<section id="listings" class="slide level2">
<h2>Listings</h2>

<img data-src="img/armslist-listing.png" class="r-stretch"></section>
<section id="what-we-want" class="slide level2">
<h2>What we want</h2>
<div class="columns">
<div class="column">
<p><strong>Measure</strong></p>
<p><em>State-month counts of new listings for firearms from private sellers and commercial dealers</em></p>
</div><div class="column">
<p><strong>Key fields</strong></p>
<ul>
<li>Date listed</li>
<li>State</li>
<li>Type of vendor</li>
<li>Category, i.e., firearm</li>
</ul>
</div></div>
<div class="fragment">
<p><strong>Scraper</strong></p>
<ul>
<li>Scrape of live listings every few days <em>since 2021</em></li>
<li>VPN rotation to evade blocks</li>
<li>Relational database for storage</li>
</ul>
</div>
</section>
<section id="what-we-got" class="slide level2">
<h2>What we got</h2>

<img data-src="img/armslist-data.png" class="r-stretch"></section>
<section id="oh-no" class="slide level2">
<h2>Oh no</h2>

<img data-src="img/diagnostic_plot_list_vendor.png" class="r-stretch"></section>
<section id="new-scraper" class="slide level2">
<h2>New scraper</h2>
<p>&nbsp;</p>
<ul>
<li class="fragment">Brute force scraping by post-ID
<ul>
<li class="fragment"><em>There are millions of post IDs</em></li>
</ul></li>
<li class="fragment">No idea how long it will take</li>
<li class="fragment">No idea if problems will be resolved</li>
</ul>
<div class="fragment center">
<p><em>We’re doing a pilot now</em></p>
</div>
</section></section>
<section>
<section id="ffls-and-background-checks" class="title-slide slide level1 inv-title center" data-background-color="#b0514a">
<h1>FFLs and Background Checks</h1>

</section>
<section id="analytical-approach" class="slide level2">
<h2>Analytical approach</h2>
<p>Difference-in-difference * Single tratment effect coefficient; ATT across 12 month period</p>
<p>Event study * ATT in each month before and after rule change * an assess parallel trends; should be no lead effects * Can see timing, e.g., delayed effect or anticipation</p>
<p>Treatment group: 25 stats without universal background checks as of May 20, 2024 and which did not receive injunctive relief</p>
<p>Compare treated group to untreated</p>
<p>Identifying assumption: In absence of rule change, average untreated potential outcomes for treated states and control group would hav efollowed parallel paths in post-treatment periods.</p>
</section>
<section id="section-2" class="slide level2 dark-slide">
<h2></h2>
<p>Treatment map</p>
</section>
<section id="estimand" class="slide level2">
<h2>Estimand</h2>
<p>DID Plot?</p>
<div class="center">
<p><em>The average difference in the outcome for the treated states in the 12 month pre-treatment period versus after the 12 months after the rule change, minus the average difference for the control group over the same time period.</em></p>
</div>
</section>
<section id="poisson-pseudo-mle-ppml" class="slide level2">
<h2>Poisson Pseudo-MLE (PPML)</h2>
<p><span class="math display">\[
log(\mathbb{E}[y_{st}]) = \alpha + \beta D_{st} + \theta_s + \gamma_t
\]</span></p>
<div class="columns">
<div class="column">
<p><strong>Variables</strong></p>
<ul>
<li><span class="math inline">\(Y_{st}\)</span>: FFLs, checks, or sales</li>
<li><span class="math inline">\(D_{st}\)</span>: Treatment indicator</li>
<li><span class="math inline">\(s\)</span>: State</li>
<li><span class="math inline">\(t\)</span>: Month-year</li>
</ul>
</div><div class="column">
<p><strong>Parameters</strong></p>
<ul>
<li><span class="math inline">\(\beta\)</span>: <strong>Treatment effect</strong></li>
<li><span class="math inline">\(\theta\)</span>: State fixed effect</li>
<li><span class="math inline">\(\gamma\)</span>: Month-year fixed effect</li>
</ul>
</div></div>
</section>
<section id="ppml-event-study" class="slide level2">
<h2>PPML Event Study</h2>
<p><span class="math display">\[
log(\mathbb{E}[y_{st}]) = \alpha + \sum_{k=-12}^{12} \left(\beta_kD_{st}^k\right) + \theta_s + \gamma_t
\]</span></p>
<p>Same as before except:</p>
<ul>
<li><span class="math inline">\(k\)</span> indexes time from treatment</li>
<li><span class="math inline">\(D_{sk}=1\)</span> for <span class="math inline">\(k\ge0\)</span></li>
<li><span class="math inline">\(\beta_k\)</span> is effect for <span class="math inline">\(k^{th}\)</span> month after rule change
<ul>
<li>Pre-intervention: the average difference in the outcome between the control and treated states in each month</li>
<li>Post-intervention: the average treatment effect for each month</li>
</ul></li>
</ul>
</section>
<section id="robustness-tests" class="slide level2">
<h2>Robustness tests</h2>
<ul>
<li>Linear TWFE with inverse hyperbolic sine</li>
<li>Rambachan &amp; Roth (2023) <em>HonestDiD</em> parallel trends test</li>
<li>ITT analysis including injunction states</li>
<li>Anticipation: Extend time period to 12 months prior to Bipartisan Safer Communities act on June 22nd, 2022</li>
</ul>
</section></section>
<section>
<section id="results" class="title-slide slide level1 inv-title center" data-background-color="#b0514a">
<h1>Results</h1>

</section>
<section id="ffl-did" class="slide level2">
<h2>FFL DiD</h2>
<p>Table 1. DiD Estimates: New FFLs Coef. Std. Err. Treat 0.103 0.059</p>
<p>Constant 1.750*** 0.020 Observations Clusters 1150 46</p>
</section>
<section id="ffl-event-study" class="slide level2">
<h2>FFL Event Study</h2>

<img data-src="img/ffl_event-study.jpg" class="r-stretch"><aside class="notes">
<p>Signs of differential seasonality, but perhaps some evidence of increases later on</p>
<p>Rambachan and Roth test suggests results would be sensitive to relatively weak confounder; can’t conclusively state this is a rule change effect</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="checks-did" class="slide level2">
<h2>Checks DiD</h2>
<p>Table 2. DiD Estimates: Background Checks Coef. Std. Err. Treat 0.004 0.020</p>
<p>Constant 10.352*** 0.006 Observations Clusters 1150 46</p>
</section>
<section id="checks-event-study" class="slide level2">
<h2>Checks Event Study</h2>

<img data-src="img/bg-check_event-study.jpg" class="r-stretch"></section></section>
<section>
<section id="discussion" class="title-slide slide level1 inv-title center" data-background-color="#b0514a">
<h1>Discussion</h1>

</section>
<section id="didnt-do-anything" class="slide level2">
<h2>Didn’t do anything</h2>
</section>
<section id="why" class="slide level2">
<h2>Why?</h2>
<ol type="1">
<li><p>the nature of the rule change was ambiguous, leading some people to believe that nothing had really changed;</p></li>
<li><p>the rule change had little deterrent effect because it was minimally enforced, perceived to be minimally enforced, or because sellers were unaware of the change;</p></li>
<li><p>not that many sellers were affected by the rule change (i.e., few private sellers were actually redefined as being “engaged in the business” of dealing firearms to “predominantly earn a profit”).</p></li>
</ol>
</section>
<section id="section-3" class="slide level2 dark-slide">
<h2></h2>
<p>AMBIGUOUS / NOTHING CHANGED</p>
<blockquote>
<p><strong>Nothing much has really changed.</strong> Private sales are still allowed. I can still post up at a gun show or post a classified to sell off parts of my collection to fund new purchases. The rule doesn’t close a loophole, it just creates (or really mostly restates) the existing rules about straw purchases and operating without a license. The rule was and remains that private sales don’t require a background check. And the people regularly buying and selling guns for a profit, or otherwise acting as straw purchasers, were already breaking the law and continue to be breaking the law, and this rule doesn’t seem to be creating new mechanisms for identifying and stopping those people. So really this seems like <strong>a preservation of the status quo</strong>… At best I think a bunch of government lawyers got paid to waste a bunch of ink on a rule that will serve as a <strong>symbolic but ultimately meaningless gesture</strong> to people who want to see politicians do something about gun laws, but don’t fundamentally understand gun laws.</p>
</blockquote>
<ul>
<li>sh1tpost1nsh1t, Reddit’s r/law</li>
</ul>
</section>
<section id="section-4" class="slide level2 dark-slide">
<h2></h2>
<p>MINIMAL ENFORCEMENT / PERCEPTION OF IT / UNAWARE</p>
<p>Implementation “dead on arrival”</p>
<p>FOIA of info on investigations and prosecutions for dealing without FFL (18 U.S.C. §922(a)(1)(A))</p>
<p>So far no evidence changes:</p>
<ul>
<li>25 cases per month May 2023 to April 2024</li>
<li>26 per month in first 7 months of policy</li>
</ul>
</section>
<section id="section-5" class="slide level2 dark-slide">
<h2></h2>
<p>Few actually affected</p>
</section>
<section id="questions" class="slide level2" data-background-image="img/paisley.png" data-background-position="bottom" data-background-size="contain">
<h2>Questions</h2>
<p>&nbsp;</p>
<p>Contact:</p>
<div class="line-block">Charles C. Lanfear<br>
Institute of Criminology<br>
University of Cambridge<br>
<a href="https://clanfear.github.io">clanfear.github.io</a><br>
<a href="mailto:cl948@cam.ac.uk">cl948@cam.ac.uk</a></div>

</section></section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="slides_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="slides_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="slides_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="slides_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="slides_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="slides_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: true,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 800,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>